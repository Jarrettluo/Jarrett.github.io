{"title":"python实现自动发送天气预报到邮箱","uid":"40aa6f67d5b5ee71766450f293f6977e","slug":"python实现自动发送天气预报到邮箱","date":"2020-10-30T14:09:53.000Z","updated":"2021-09-30T14:13:00.197Z","comments":true,"path":"api/articles/python实现自动发送天气预报到邮箱.json","keywords":null,"cover":[],"content":"<p>author：Jarrett<br>初稿时间：2020年10月8日</p>\n<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>假如有个私人助理每天向我报告我所关心信息，比如我想知道今天的热点新闻，知乎、微博的热点内容，某个技术有了什么新的突破等等信息。<br>但是，没有真人的“私人助理”但是可以有一个程序来帮我做到以上的事情。一个运行在服务端的程序，每天抓取我想要的信息，再定时地发送我的邮箱，这不就让梦想更进一步了。那就先来完成一个自动发送天气预报的程序，再将这个程序部署在树莓派上，设置为每天早上和下午定时发送到邮箱。</p>\n<h3 id=\"天气数据的获取\"><a href=\"#天气数据的获取\" class=\"headerlink\" title=\"天气数据的获取\"></a>天气数据的获取</h3><p>api提供商和风天气<br>和风天气的开发者文档地址为：<br><a href=\"https://dev.heweather.com/docs/api/weather\">https://dev.heweather.com/docs/api/weather</a></p>\n<p>和风天气支持提供某个地区的天气预报和实况天气信息。其城市级天气预报API，包括全球15万个城市或地区的1-15天天气预报、实况天气、逐小时天气预报以及日出日落、月升月落等数据。<br>和风天气提供的API包括商业版和开发版。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>如需要查看更早期的版本的开发文档请访问 <a href=\"https://dev.heweather.com/docs/legacy/api/s6\">S6版本</a>，S6版本的技术支持截止于2020年6月1日。</p></blockquote>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"># 3天预报 HTTP GET\n\n$ 商业版 https:&#x2F;&#x2F;api.heweather.net&#x2F;v7&#x2F;weather&#x2F;3d?&#123;请求参数&#125;\n$ 开发版 https:&#x2F;&#x2F;devapi.heweather.net&#x2F;v7&#x2F;weather&#x2F;3d?&#123;请求参数&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"python链接和风天气\"><a href=\"#python链接和风天气\" class=\"headerlink\" title=\"python链接和风天气\"></a>python链接和风天气</h4><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">url <span class=\"token operator\">=</span> APIURL <span class=\"token operator\">+</span> <span class=\"token string\">'?location= '</span> <span class=\"token operator\">+</span> CITY <span class=\"token operator\">+</span> <span class=\"token string\">'&amp;key='</span> <span class=\"token operator\">+</span> KEY\nres <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\nres <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Change the response to json.</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>和风天气的返回数据如下所示。</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"HeWeather6\"</span><span class=\"token operator\">:</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"basic\"</span><span class=\"token operator\">:</span>\n<span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"cid\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"CN101271503\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"彭山\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"parent_city\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"眉山\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"admin_area\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"四川省\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"cnty\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"中国\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"lat\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"30.19229889\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"lon\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"103.87010193\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"tz\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"+8.00\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"update\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"loc\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2020-10-08 20:40\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"utc\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2020-10-08 12:40\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"status\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"ok\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"daily_forecast\"</span><span class=\"token operator\">:</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"cond_code_d\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"305\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"cond_code_n\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"305\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"cond_txt_d\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"小雨\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"cond_txt_n\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"小雨\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"date\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2020-10-08\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"hum\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"85\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"mr\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"22:51\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ms\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"12:27\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"pcpn\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"1.4\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"pop\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"58\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"pres\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"967\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"sr\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"07:03\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ss\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"18:39\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"tmp_max\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"19\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"tmp_min\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"16\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"uv_index\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"vis\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"25\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_deg\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"59\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_dir\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"东北风\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_sc\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"1-2\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_spd\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"3\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"cond_code_d\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"305\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"cond_code_n\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"305\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"cond_txt_d\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"小雨\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"cond_txt_n\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"小雨\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"date\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2020-10-09\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"hum\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"87\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"mr\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"23:43\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ms\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"13:23\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"pcpn\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"1.0\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"pop\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"55\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"pres\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"963\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"sr\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"07:03\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ss\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"18:38\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"tmp_max\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"20\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"tmp_min\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"16\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"uv_index\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"vis\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"25\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_deg\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_dir\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"北风\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_sc\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"1-2\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_spd\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"3\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"cond_code_d\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"305\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"cond_code_n\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"305\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"cond_txt_d\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"小雨\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"cond_txt_n\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"小雨\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"date\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2020-10-10\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"hum\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"88\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"mr\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"00:00\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ms\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"14:15\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"pcpn\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"1.0\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"pop\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"55\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"pres\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"961\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"sr\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"07:04\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ss\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"18:37\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"tmp_max\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"20\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"tmp_min\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"17\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"uv_index\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"vis\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"25\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_deg\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_dir\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"北风\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_sc\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"1-2\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"wind_spd\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"3\"</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h5 id=\"格式整理\"><a href=\"#格式整理\" class=\"headerlink\" title=\"格式整理\"></a>格式整理</h5><p>使用开发版的API只能提供三天的天气预报数据。从获取的信息中提取到天气描述、最高温度、最低温度、湿度、风向、风级、风速等信息。</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">forecast <span class=\"token operator\">=</span> res<span class=\"token punctuation\">[</span><span class=\"token string\">'HeWeather6'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'daily_forecast'</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> data <span class=\"token keyword\">in</span> forecast<span class=\"token punctuation\">:</span>\n    cond_txt_d <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'cond_txt_d'</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># weather 天气描述</span>\n    tmp_max <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'tmp_max'</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># max temperature.</span>\n    tmp_min <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'tmp_min'</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># min tempereture.</span>\n    hum <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'hum'</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># humanity</span>\n    wind_dir <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'wind_dir'</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># wind direction.</span>\n    wind_sc <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'wind_sc'</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># wind degree.</span>\n    wind_spd <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'wind_spd'</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># wind speed.</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h5 id=\"发送邮件\"><a href=\"#发送邮件\" class=\"headerlink\" title=\"发送邮件\"></a>发送邮件</h5><p>邮件发送模块采用菜鸟教程的demo即可完成。<br>发送的邮箱可以选择国内的163邮箱，QQ邮箱。需要注意的是发送邮箱的token是需要到邮箱的设置页设置的，而不是常用的登录邮箱。<br>这里建议将发件人姓名(<code>username</code>)发件人的邮箱地址，收件人的姓名、收件人的邮箱地址，全部放到配置文件中。这样做的目的是方便以后扩展和修改，避免修改程序；另一方面将其加入到<code>gitingore</code>文件中，就不会被同步。</p>\n<h5 id=\"数据-gt-格式-gt-邮件发送\"><a href=\"#数据-gt-格式-gt-邮件发送\" class=\"headerlink\" title=\"数据 -&gt; 格式 -&gt; 邮件发送\"></a>数据 -&gt; 格式 -&gt; 邮件发送</h5><p>通过将获取的天气预报数据整理格式，就可以发送天气预报到邮箱了。</p>\n<p><img src=\"./python%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8F%91%E9%80%81%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5%E5%88%B0%E9%82%AE%E7%AE%B1/101.png\" alt=\"邮箱里接收到的信息\"></p>\n<p>单纯的文字看上去就很“朴素”，为了增强用户的友好度，我们采用HTML美化。<br>美化的方法是首先用html设计一个网页，然后再将需要显示的数据给替换为查询的天气信息。<br><img src=\"./python%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8F%91%E9%80%81%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5%E5%88%B0%E9%82%AE%E7%AE%B1/102.png\" alt=\"天气预报\"></p>\n<p>界面的美化是因人而异，直接copy了和风天气的UI。</p>\n<h5 id=\"结论\"><a href=\"#结论\" class=\"headerlink\" title=\"结论\"></a>结论</h5><ul>\n<li>用最简单的方式爬取和风天气的API。仅用几行代码就可以获取到天气信息，这也是很多爬虫程序的第一步。</li>\n<li>邮件发送的模块是可以完全复用的。邮件发送的内容可以是普通的文本，html，图片，以及附件等。</li>\n<li>这里是实现了发送邮件的内容，下一步需要将其部署在树莓派中，且设置为定时任务。</li>\n</ul>\n<h5 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h5><p><a href=\"https://www.runoob.com/python/python-email.html\">菜鸟教程：Python SMTP发送邮件</a><br><a href=\"https://github.com/Jarrettluo/Weather_Forecast\">https://github.com/Jarrettluo/Weather_Forecast</a></p>\n","text":"author：Jarrett初稿时间：2020年10月8日 前言假如有个私人助理每天向我报告我所关心信息，比如我想知道今天的热点新闻，知乎、微博的热点内容，某个技术有了什么新的突破等等信息。但是，没有真人的“私人助理”但是可以有一个程序来帮我做到以上的事情。一个运行在服务端的程序...","link":"","photos":[],"count_time":{"symbolsCount":"3.2k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"python","slug":"python","count":3,"path":"api/tags/python.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%A9%E6%B0%94%E6%95%B0%E6%8D%AE%E7%9A%84%E8%8E%B7%E5%8F%96\"><span class=\"toc-text\">天气数据的获取</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#python%E9%93%BE%E6%8E%A5%E5%92%8C%E9%A3%8E%E5%A4%A9%E6%B0%94\"><span class=\"toc-text\">python链接和风天气</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%A0%BC%E5%BC%8F%E6%95%B4%E7%90%86\"><span class=\"toc-text\">格式整理</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6\"><span class=\"toc-text\">发送邮件</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE-gt-%E6%A0%BC%E5%BC%8F-gt-%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81\"><span class=\"toc-text\">数据 -&gt; 格式 -&gt; 邮件发送</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E7%BB%93%E8%AE%BA\"><span class=\"toc-text\">结论</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83\"><span class=\"toc-text\">参考</span></a></li></ol></li></ol></li></ol>","author":{"name":"JIARUI's BLOG","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17515212?s=400&u=3dc2bbf2e6239369be5c37d357699a46d94404c9&v=4","link":"/","description":"数据应用大师Master <br /> <b>谋时而动 顺势而为</b>","socials":{"github":"https://github.com/Jarrettluo","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/luo-jia-rui","csdn":"https://blog.csdn.net/JarrettLuo","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"如何修改mysql数据库表？","uid":"a4109aa5039151282f65b788222ecfd7","slug":"如何修改mysql数据库表？","date":"2021-09-28T14:39:34.000Z","updated":"2021-09-29T15:33:04.829Z","comments":true,"path":"api/articles/如何修改mysql数据库表？.json","keywords":null,"cover":"http://h2.ioliu.cn/bing/RainierMilkyWay_ZH-CN9404321904_1920x1080.jpg","text":" 当我们需要修改数据表名或者修改数据表字段时，就需要使用到MySQL ALTER命令。 1、 变更表的字段信息： 删除字段AALTER TABLE TEST_TABLE DROP A; 添加字段并指定类型ALTER TABLE TEST_TABLE ADD B INT; 修改字段...","link":"","photos":[],"count_time":{"symbolsCount":704,"symbolsTime":"1 mins."},"categories":[{"name":"Mysql","slug":"Mysql","count":1,"path":"api/categories/Mysql.json"},{"name":"Java","slug":"Mysql/Java","count":1,"path":"api/categories/Mysql/Java.json"}],"tags":[{"name":"Java","slug":"Java","count":6,"path":"api/tags/Java.json"},{"name":"Mysql","slug":"Mysql","count":1,"path":"api/tags/Mysql.json"}],"author":{"name":"JIARUI's BLOG","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17515212?s=400&u=3dc2bbf2e6239369be5c37d357699a46d94404c9&v=4","link":"/","description":"数据应用大师Master <br /> <b>谋时而动 顺势而为</b>","socials":{"github":"https://github.com/Jarrettluo","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/luo-jia-rui","csdn":"https://blog.csdn.net/JarrettLuo","juejin":"","customs":{}}}},"next_post":{"title":"使用NSIS打包Python安装程序","uid":"6b4aa81655f1909a16b68fb617987407","slug":"使用NSIS打包Python安装程序","date":"2020-10-28T14:44:32.000Z","updated":"2021-09-29T15:04:37.307Z","comments":true,"path":"api/articles/使用NSIS打包Python安装程序.json","keywords":null,"cover":"http://h2.ioliu.cn/bing/QingMingHuangShan_ZH-CN12993895964_1920x1080.jpg","text":"1、前言程序设计好以后会生成若干可执行文件和依赖文件。为了方便程序被更好地使用，需要将程序封装为一个安装程序。 2、平台和环境Windows系统安装NSIS下载地址：https://nsis.sourceforge.io/Download NSIS（Nullsoft Script...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"桌面程序","slug":"桌面程序","count":1,"path":"api/categories/桌面程序.json"}],"tags":[{"name":"python","slug":"python","count":3,"path":"api/tags/python.json"}],"author":{"name":"JIARUI's BLOG","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17515212?s=400&u=3dc2bbf2e6239369be5c37d357699a46d94404c9&v=4","link":"/","description":"数据应用大师Master <br /> <b>谋时而动 顺势而为</b>","socials":{"github":"https://github.com/Jarrettluo","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/luo-jia-rui","csdn":"https://blog.csdn.net/JarrettLuo","juejin":"","customs":{}}}}}